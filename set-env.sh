#!/usr/bin/env bash

########################################################################################################################
########################################################################################################################
#######################                                                                      ###########################
#######################              VALUE DEFAULT OF THE VARIABLES                          ###########################
#######################                                                                      ###########################
########################################################################################################################
########################################################################################################################
# Java language    --> Flags : j java
JAVA_VER="8"

# Scala language   --> Flags : s scala
SCALA_VER="2.11.8"

# Hadoop Platform  --> Flags : h hadoop
HADOOP_VER="2.6.0"

# Spark Platform   --> Flags : k spark
SPARK_VER="1.6.0"

# Flink Platform   --> Flags : f flink
FLINK_VER="1.3.2"

# Ignite Platform  --> Flags : i ignite
IGNITE_VER="2.3.0"

########################################################################################################################
########################################################################################################################
#######################                                                                      ###########################
#######################             FUNCTIONS                                                ###########################
#######################                                                                      ###########################
########################################################################################################################
########################################################################################################################

help_rheem(){
# TODO: terminar el help para la ayuda
    echo "necesitas ayuda?"
}

compact_name(){
    first="$(echo $1 | cut -d '.' -f 1)"
    second="$(echo $1 | cut -d '.' -f 2)"
    if [ $2 = true ]; then
       echo "$first.$second"
    else
        echo "$first$second"
    fi
}

########################################################################################################################
########################################################################################################################
#######################                                                                      ###########################
#######################     LOAD OF PARAMETERS AND SET OF NEW VALUES OF VARIABLES            ###########################
#######################                                                                      ###########################
########################################################################################################################
########################################################################################################################
while getopts jshkfi-: arg; do
    case $arg in
        j ) JAVA_VER=${!OPTIND}   ;;
        s ) SCALA_VER=${!OPTIND}  ;;
        h ) HADOOP_VER=${!OPTIND} ;;
        k ) SPARK_VER=${!OPTIND}  ;;
        f ) FLINK_VER=${!OPTIND}  ;;
        i ) IGNITE_VER=${!OPTIND} ;;
        - ) LONG_OPTARG="${OPTARG#*=}"
            case "${OPTARG}" in
                java   )  JAVA_VER=${!OPTIND}   ;;
                scala  )  SCALA_VER=${!OPTIND}  ;;
                hadoop )  HADOOP_VER=${!OPTIND} ;;
                spark  )  SPARK_VER=${!OPTIND}  ;;
                flink  )  FLINK_VER=${!OPTIND}  ;;
                ignite )  IGNITE_VER=${!OPTIND} ;;
                help   )  help_rheem; exit 0 ;;
                '' )        break ;; # "--" terminates argument processing
                * )         echo "Illegal option --$OPTARG" >&2; exit 2 ;;
            esac ;;
        \? ) exit 2 ;;  # getopts already reported the illegal option
    esac
    shift
done

SCALA_COMPACT_VER=$(compact_name $SCALA_VER true)
HADOOP_COMPACT_VER=$(compact_name $HADOOP_VER true)
HADOOP_WITHOUT_DOR_VER=$(compact_name $HADOOP_VER false)

########################################################################################################################
########################################################################################################################
#######################                                                                      ###########################
#######################       SHOW OF THE VALUE FOR WORKING IN THE SCRIPT                    ###########################
#######################                                                                      ###########################
########################################################################################################################
########################################################################################################################

echo "JAVA_VER                $JAVA_VER   "
echo "SCALA_VER               $SCALA_VER  "
echo "SCALA_COMPACT_VER       $SCALA_COMPACT_VER"
echo "HADOOP_VER              $HADOOP_VER "
echo "HADOOP_COMPACT_VER      $HADOOP_COMPACT_VER"
echo "HADOOP_WITHOUT_DOR_VER  $HADOOP_WITHOUT_DOR_VER"
echo "SPARK_VER               $SPARK_VER  "
echo "FLINK_VER               $FLINK_VER  "
echo "IGNITE_VER              $IGNITE_VER "

########################################################################################################################
########################################################################################################################
#######################                                                                      ###########################
#######################                                                                      ###########################
#######################                                                                      ###########################
########################################################################################################################
########################################################################################################################



